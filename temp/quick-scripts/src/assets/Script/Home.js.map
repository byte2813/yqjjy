{"version":3,"sources":["assets\\Script\\Home.js"],"names":["GameTools","require","GameUiTools","GameConfig","cc","Class","Component","properties","label","type","Label","displayName","start","num","schedule","updatelabel","onLoad","buyGoldUpgrade","Math","floor","getItemByLocalStorage","i","pow","ceil","buyCoinUpgrade","setMessage","director","preloadScene","loadScene","GameMoney","GameCoin","GamePersonMaxLevel","turnTableNum","console","log","sys","platform","WECHAT_GAME","BYTEDANCE_GAME","QQ_PLAY","BK","QQ","fetchOpenKey","errCode","cmd","data","OPENID","openId","index","string"],"mappings":";;;;;;AAAA,IAAIA,SAAS,GAAGC,OAAO,CAAC,WAAW,CAAC;AACpC,IAAIC,WAAW,GAAGD,OAAO,CAAC,aAAa,CAAC;AACxC,IAAIE,UAAU,GAAGF,OAAO,CAAC,YAAY,CAAC;AAEtCG,EAAE,CAACC,KAAK,CAAC;EACL,WAASD,EAAE,CAACE,SAAS;EAErBC,UAAU,EAAE;IACRC,KAAK,EAAE;MACH,WAAS,IAAI;MACbC,IAAI,EAAEL,EAAE,CAACM,KAAK;MACdC,WAAW,EAAC;IAChB;EAEJ,CAAC;EACDC,KAAK,WAAAA,MAAA,EAAE;IACH,IAAI,CAACC,GAAG,GAAG,CAAC;IACZ,IAAI,CAACC,QAAQ,CAAC,IAAI,CAACC,WAAW,EAAC,GAAG,CAAC;EACvC,CAAC;EACDC,MAAM,EAAE,SAAAA,OAAA,EAAY;IAEhBb,UAAU,CAACc,cAAc,CAAC,CAAC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACnB,SAAS,CAACoB,qBAAqB,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;IAClGjB,UAAU,CAACc,cAAc,CAAC,CAAC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACnB,SAAS,CAACoB,qBAAqB,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;IACnG,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,IAAE,EAAE,EAACA,CAAC,EAAE,EAAC;MAClBlB,UAAU,CAACc,cAAc,CAACI,CAAC,CAAC,GAACH,IAAI,CAACC,KAAK,CAACnB,SAAS,CAACoB,qBAAqB,CAAC,gBAAgB,GAACC,CAAC,EAACH,IAAI,CAACC,KAAK,CAACD,IAAI,CAACI,GAAG,CAAE,CAAC,GAACJ,IAAI,CAACK,IAAI,CAACF,CAAC,GAAC,EAAE,CAAC,GAAC,GAAG,EAAEA,CAAC,GAAC,CAAC,CAAC,GAAC,IAAI,CAAC,CAAC,CAAC;IACvJ;IAEAlB,UAAU,CAACqB,cAAc,CAAC,CAAC,CAAC,GAAGN,IAAI,CAACC,KAAK,CAACnB,SAAS,CAACoB,qBAAqB,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAAC;IACjG,KAAI,IAAIC,EAAC,GAAC,CAAC,EAACA,EAAC,IAAE,EAAE,EAACA,EAAC,EAAE,EAAC;MAClB,IAAGA,EAAC,GAAC,EAAE,EAAC;QACJlB,UAAU,CAACqB,cAAc,CAACH,EAAC,CAAC,GAACH,IAAI,CAACC,KAAK,CAACnB,SAAS,CAACoB,qBAAqB,CAAC,gBAAgB,GAACC,EAAC,EAACH,IAAI,CAACC,KAAK,CAAC,EAAE,GAAC,EAAE,IAAEE,EAAC,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACxH,CAAC,MAAI;QACDlB,UAAU,CAACqB,cAAc,CAACH,EAAC,CAAC,GAACH,IAAI,CAACC,KAAK,CAACnB,SAAS,CAACoB,qBAAqB,CAAC,gBAAgB,GAACC,EAAC,EAACH,IAAI,CAACC,KAAK,CAAC,GAAG,GAACD,IAAI,CAACI,GAAG,CAAC,GAAG,EAACD,EAAC,CAAC,CAAC,CAAC,CAAC;MAChI;IACJ;IAEA,IAAI,CAACI,UAAU,EAAE;IAEjBrB,EAAE,CAACsB,QAAQ,CAACC,YAAY,CAAC,YAAY,EAAE,YAAY;MAC/CvB,EAAE,CAACsB,QAAQ,CAACE,SAAS,CAAC,YAAY,CAAC;IACvC,CAAC,CAAC;EACN,CAAC;EACDH,UAAU,WAAAA,WAAA,EAAE;IACRtB,UAAU,CAAC0B,SAAS,GAAG7B,SAAS,CAACoB,qBAAqB,CAAC,WAAW,EAAC,IAAI,CAAC;IACxEjB,UAAU,CAAC2B,QAAQ,GAAG9B,SAAS,CAACoB,qBAAqB,CAAC,UAAU,EAAC,CAAC,CAAC;IACnEjB,UAAU,CAAC4B,kBAAkB,GAAG/B,SAAS,CAACoB,qBAAqB,CAAC,oBAAoB,EAAE,CAAC,CAAC;IACxFjB,UAAU,CAAC6B,YAAY,GAAGhC,SAAS,CAACoB,qBAAqB,CAAC,SAAS,EAAC,CAAC,CAAC;IACtEa,OAAO,CAACC,GAAG,CAAC,KAAK,EAAC9B,EAAE,CAAC+B,GAAG,CAACC,QAAQ,CAAC;IAClC,IAAIhC,EAAE,CAAC+B,GAAG,CAACC,QAAQ,KAAKhC,EAAE,CAAC+B,GAAG,CAACE,WAAW,EAAE;MACxC;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAAA,CACH,MAAK,IAAIjC,EAAE,CAAC+B,GAAG,CAACC,QAAQ,KAAKhC,EAAE,CAAC+B,GAAG,CAACG,cAAc,EAAC,CAEpD,CAAC,MAAK,IAAGlC,EAAE,CAAC+B,GAAG,CAACC,QAAQ,KAAKhC,EAAE,CAAC+B,GAAG,CAACI,OAAO,EAAC;MACxCC,EAAE,CAACC,EAAE,CAACC,YAAY,CAAC,UAAUC,OAAO,EAAEC,GAAG,EAAEC,IAAI,EAAE;QAC7C,IAAIF,OAAO,IAAI,CAAC,EAAE;UACdxC,UAAU,CAAC2C,MAAM,GAAGD,IAAI,CAACE,MAAM;UAC/Bd,OAAO,CAACC,GAAG,CAAC,SAAS,GAACW,IAAI,CAACE,MAAM,CAAC;QACtC;MACJ,CAAC,CAAC;IACN;EACJ,CAAC;EAGDhC,WAAW,WAAAA,YAAA,EAAE;IACT,IAAI,CAACiC,KAAK,EAAE;IACZ,IAAI,IAAI,CAACA,KAAK,GAAG,CAAC,IAAI,CAAC,EAAE;MACrB,IAAI,CAACxC,KAAK,CAACyC,MAAM,GAAG,UAAU;IAClC,CAAC,MAAM,IAAI,IAAI,CAACD,KAAK,GAAG,CAAC,IAAI,CAAC,EAAE;MAC5B,IAAI,CAACxC,KAAK,CAACyC,MAAM,GAAG,WAAW;IACnC,CAAC,MAAM,IAAI,IAAI,CAACD,KAAK,GAAG,CAAC,IAAI,CAAC,EAAE;MAC5B,IAAI,CAACxC,KAAK,CAACyC,MAAM,GAAG,YAAY;IACpC,CAAC,MAAM,IAAI,IAAI,CAACD,KAAK,GAAG,CAAC,IAAI,CAAC,EAAE;MAC5B,IAAI,CAACxC,KAAK,CAACyC,MAAM,GAAG,aAAa;IACrC;EACJ;AAEJ,CAAC,CAAC","sourceRoot":"/","sourcesContent":["var GameTools = require(\"GameTools\");\nvar GameUiTools = require(\"GameUiTools\");\nvar GameConfig = require(\"GameConfig\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        label: {\n            default: null,\n            type: cc.Label,\n            displayName:\"加载字\",\n        },\n        \n    },\n    start(){\n        this.num = 0;\n        this.schedule(this.updatelabel,0.2);\n    },\n    onLoad: function () {\n\n        GameConfig.buyGoldUpgrade[1] = Math.floor(GameTools.getItemByLocalStorage(\"buyGoldUpgrade1\", 100));\n        GameConfig.buyGoldUpgrade[2] = Math.floor(GameTools.getItemByLocalStorage(\"buyGoldUpgrade2\", 1500));\n        for(let i=3;i<=42;i++){\n            GameConfig.buyGoldUpgrade[i]=Math.floor(GameTools.getItemByLocalStorage(\"buyGoldUpgrade\"+i,Math.floor(Math.pow((3+Math.ceil(i/10)*0.1),i-2)*1500)));\n        }\n\n        GameConfig.buyCoinUpgrade[1] = Math.floor(GameTools.getItemByLocalStorage(\"buyCoinUpgrade1\", 40));\n        for(let i=2;i<=42;i++){\n            if(i<10){\n                GameConfig.buyCoinUpgrade[i]=Math.floor(GameTools.getItemByLocalStorage(\"buyCoinUpgrade\"+i,Math.floor(40+20*(i-1))));\n            }else{\n                GameConfig.buyCoinUpgrade[i]=Math.floor(GameTools.getItemByLocalStorage(\"buyCoinUpgrade\"+i,Math.floor(200*Math.pow(1.5,i))));\n            }\n        }\n\n        this.setMessage();\n        \n        cc.director.preloadScene(\"helloworld\", function () {\n            cc.director.loadScene(\"helloworld\");\n        });\n    },\n    setMessage(){\n        GameConfig.GameMoney = GameTools.getItemByLocalStorage(\"GameMoney\",1000);\n        GameConfig.GameCoin = GameTools.getItemByLocalStorage(\"GameCoin\",0);\n        GameConfig.GamePersonMaxLevel = GameTools.getItemByLocalStorage(\"GamePersonMaxLevel\", 1);\n        GameConfig.turnTableNum = GameTools.getItemByLocalStorage(\"turnNum\",0);\n        console.log(\"平台:\",cc.sys.platform)\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\n            //接入sdk登录\n\n            // wx.request({\n            //     url: '',\n            //     success: function (res) {\n            //         console.log(res);\n            //         GameConfig.IS_GAME_SHARE = res.data.allow_share;\n            //         GameConfig.shareData.title = res.data.share_title;\n            //         GameConfig.shareData.url = res.data.share_img;\n            //         console.log('获取资源成功',GameConfig.IS_GAME_SHARE);\n            //     },\n            //     fail: function () {\n            //         console.log('获取资源失败',GameConfig.IS_GAME_SHARE);\n            //     }\n            // })\n        }else if (cc.sys.platform === cc.sys.BYTEDANCE_GAME){\n\n        }else if(cc.sys.platform === cc.sys.QQ_PLAY){\n            BK.QQ.fetchOpenKey(function (errCode, cmd, data) {\n                if (errCode == 0) {\n                    GameConfig.OPENID = data.openId;\n                    console.log('openId='+data.openId);\n                }\n            });\n        }\n    },\n\n\n    updatelabel(){\n        this.index++;\n        if (this.index % 4 == 0) {\n            this.label.string = \"游戏正在加载..\";\n        } else if (this.index % 4 == 1) {\n            this.label.string = \"游戏正在加载...\";\n        } else if (this.index % 4 == 2) {\n            this.label.string = \"游戏正在加载。...\";\n        } else if (this.index % 4 == 3) {\n            this.label.string = \"游戏正在加载。....\";\n        }\n    }\n\n});\n"]}