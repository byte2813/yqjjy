
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/DeskSprite.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e27a6lB9LFJWqRnJmb1op53', 'DeskSprite');
// Script/DeskSprite.js

"use strict";

var GameTools = require("GameTools");
var GameUiTools = require("GameUiTools");
var DeskSprite = cc.Class({
  "extends": cc.Component,
  properties: {
    deskSpriteSke: cc.Sprite,
    levelbg: cc.Node,
    //等级红色底片
    level: cc.Node,
    //等级字母
    number: 0,
    // 显示数字
    isSelect: false,
    expNumber: 5,
    //经验值
    showEXP: cc.Node //展示的经验
  },

  ctor: function ctor() {},
  start: function start() {
    this.schedule(function () {
      var _this = this;
      // console.log("次数")
      // 三秒一次
      if (this.number != 0) {
        this.expNumber = GameTools.getEXPNumber(this.number);
        this.showEXP.active = true;
        if (this.isSelect) {
          this.showEXP.getComponent(cc.Label).string = "+" + GameTools.getNumberString(this.expNumber) + "x2";
        } else {
          this.showEXP.getComponent(cc.Label).string = "+" + GameTools.getNumberString(this.expNumber);
        }
        this.showEXP_Pos = this.showEXP.getPosition();
        this.showEXP.runAction(cc.sequence(cc.moveBy(0.2, 0, 60), cc.fadeOut(0.2), cc.callFunc(function () {
          _this.showEXP.active = false;
          _this.showEXP.setPosition(_this.showEXP_Pos);
          _this.showEXP.opacity = 255;
        })));
        this.deskSpriteSke.node.runAction(cc.sequence(cc.scaleTo(0.2, 1, 0.9), cc.scaleTo(0.2, 1, 1)));
      }
    }, 2.5);
  },
  //合成左右摇摆
  addNumberAnim: function addNumberAnim() {
    var _this2 = this;
    var moveTime = 0.1;
    var deskNode = cc.instantiate(this.deskSpriteSke.node);
    deskNode.runAction(cc.sequence(cc.moveBy(moveTime, -70, 0), cc.delayTime(0.1), cc.moveTo(moveTime, 0, 0), cc.removeSelf()));
    this.node.addChild(deskNode);
    var deskNode2 = cc.instantiate(this.deskSpriteSke.node);
    deskNode2.runAction(cc.sequence(cc.moveBy(moveTime, 70, 0), cc.delayTime(0.1), cc.moveTo(moveTime, 0, 0), cc.callFunc(function () {
      _this2.deskShow();
    }), cc.removeSelf()));
    this.node.addChild(deskNode2);
  },
  initDesk: function initDesk(numbers, DeskSpriteX, DeskSpriteY)
  // 初始化
  {
    // 初始化数字
    this.number = numbers;
    this.deskShow();
    this.node.setPosition(DeskSpriteX, DeskSpriteY);
  },
  deskShow: function deskShow() {
    if (this.number == 0) {
      this.deskSpriteSke.node.active = false;
      this.levelbg.active = false;
      // this.level.active = false;
    } else if (this.number >= 1 && this.number <= 42) {
      this.deskSpriteSke.node.active = true;
      this.levelbg.active = true;
      // this.level.active = true;
      GameUiTools.setSpriteFrame("persion/LV" + this.number, this.deskSpriteSke);
      // this.expNumber = GameTools.getBatteryexpNumber(this.number);
      this.level.getComponent('Number').showNumber(this.number);
    }
  },
  deskClickShow: function deskClickShow(clickType) {
    if (clickType == 1) {
      this.deskSpriteSke.node.opacity = 120;
    } else {
      this.deskSpriteSke.node.opacity = 255;
    }
  }
});
module.exports = DeskSprite;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxEZXNrU3ByaXRlLmpzIl0sIm5hbWVzIjpbIkdhbWVUb29scyIsInJlcXVpcmUiLCJHYW1lVWlUb29scyIsIkRlc2tTcHJpdGUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImRlc2tTcHJpdGVTa2UiLCJTcHJpdGUiLCJsZXZlbGJnIiwiTm9kZSIsImxldmVsIiwibnVtYmVyIiwiaXNTZWxlY3QiLCJleHBOdW1iZXIiLCJzaG93RVhQIiwiY3RvciIsInN0YXJ0Iiwic2NoZWR1bGUiLCJfdGhpcyIsImdldEVYUE51bWJlciIsImFjdGl2ZSIsImdldENvbXBvbmVudCIsIkxhYmVsIiwic3RyaW5nIiwiZ2V0TnVtYmVyU3RyaW5nIiwic2hvd0VYUF9Qb3MiLCJnZXRQb3NpdGlvbiIsInJ1bkFjdGlvbiIsInNlcXVlbmNlIiwibW92ZUJ5IiwiZmFkZU91dCIsImNhbGxGdW5jIiwic2V0UG9zaXRpb24iLCJvcGFjaXR5Iiwibm9kZSIsInNjYWxlVG8iLCJhZGROdW1iZXJBbmltIiwiX3RoaXMyIiwibW92ZVRpbWUiLCJkZXNrTm9kZSIsImluc3RhbnRpYXRlIiwiZGVsYXlUaW1lIiwibW92ZVRvIiwicmVtb3ZlU2VsZiIsImFkZENoaWxkIiwiZGVza05vZGUyIiwiZGVza1Nob3ciLCJpbml0RGVzayIsIm51bWJlcnMiLCJEZXNrU3ByaXRlWCIsIkRlc2tTcHJpdGVZIiwic2V0U3ByaXRlRnJhbWUiLCJzaG93TnVtYmVyIiwiZGVza0NsaWNrU2hvdyIsImNsaWNrVHlwZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsSUFBSUEsU0FBUyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLElBQUlDLFdBQVcsR0FBR0QsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN4QyxJQUFJRSxVQUFVLEdBQUdDLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ3RCLFdBQVNE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QUFJLElBQUksQ0FBQ25DLE1BQU0sSUFBSSxDQUFDLEVBQUU7TUFDbEIsSUFBSSxDQUFDTCxhQUFhLENBQUM0QixJQUFJLENBQUNkLE1BQU0sR0FBRyxLQUFLO01BQ3RDLElBQUksQ0FBQ1osT0FBTyxDQUFDWSxNQUFNLEdBQUcsS0FBSztNQUMzQjtJQUNKLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQ1QsTUFBTSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUNBLE1BQU0sSUFBSSxFQUFFLEVBQUU7TUFDOUMsSUFBSSxDQUFDTCxhQUFhLENBQUM0QixJQUFJLENBQUNkLE1BQU0sR0FBRyxJQUFJO01BQ3JDLElBQUksQ0FBQ1osT0FBTyxDQUFDWSxNQUFNLEdBQUcsSUFBSTtNQUMxQjtNQUNBcEIsV0FBVyxDQUFDbUQsY0FBYyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUN4QyxNQUFNLEVBQUUsSUFBSSxDQUFDTCxhQUFhLENBQUM7TUFDMUU7TUFDQSxJQUFJLENBQUNJLEtBQUssQ0FBQ1csWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDK0IsVUFBVSxDQUFDLElBQUksQ0FBQ3pDLE1BQU0sQ0FBQztJQUM3RDtFQUNKLENBQUM7RUFDRDBDLGFBQWEsV0FBQUEsY0FBQ0MsU0FBUyxFQUFFO0lBQ3JCLElBQUlBLFNBQVMsSUFBSSxDQUFDLEVBQUU7TUFDaEIsSUFBSSxDQUFDaEQsYUFBYSxDQUFDNEIsSUFBSSxDQUFDRCxPQUFPLEdBQUcsR0FBRztJQUN6QyxDQUFDLE1BQU07TUFDSCxJQUFJLENBQUMzQixhQUFhLENBQUM0QixJQUFJLENBQUNELE9BQU8sR0FBRyxHQUFHO0lBQ3pDO0VBQ0o7QUFFSixDQUFDLENBQUM7QUFFRnNCLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHdkQsVUFBVSIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbnZhciBHYW1lVG9vbHMgPSByZXF1aXJlKFwiR2FtZVRvb2xzXCIpO1xyXG52YXIgR2FtZVVpVG9vbHMgPSByZXF1aXJlKFwiR2FtZVVpVG9vbHNcIik7XHJcbnZhciBEZXNrU3ByaXRlID0gY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGRlc2tTcHJpdGVTa2U6IGNjLlNwcml0ZSxcclxuICAgICAgICBsZXZlbGJnOmNjLk5vZGUsLy/nrYnnuqfnuqLoibLlupXniYdcclxuICAgICAgICBsZXZlbDogY2MuTm9kZSwvL+etiee6p+Wtl+avjVxyXG4gICAgICAgIG51bWJlcjogMCwvLyDmmL7npLrmlbDlrZdcclxuICAgICAgICBpc1NlbGVjdDogZmFsc2UsXHJcbiAgICAgICAgZXhwTnVtYmVyOiA1LC8v57uP6aqM5YC8XHJcbiAgICAgICAgc2hvd0VYUDpjYy5Ob2RlLC8v5bGV56S655qE57uP6aqMXHJcbiAgICB9LFxyXG4gICAgY3RvcjogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuasoeaVsFwiKVxyXG4gICAgICAgICAgICAvLyDkuInnp5LkuIDmrKFcclxuICAgICAgICAgICAgaWYgKHRoaXMubnVtYmVyICE9IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwTnVtYmVyID0gR2FtZVRvb2xzLmdldEVYUE51bWJlcih0aGlzLm51bWJlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFWFAuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNTZWxlY3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VYUC5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IFwiK1wiK0dhbWVUb29scy5nZXROdW1iZXJTdHJpbmcodGhpcy5leHBOdW1iZXIpK1wieDJcIjtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VYUC5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IFwiK1wiK0dhbWVUb29scy5nZXROdW1iZXJTdHJpbmcodGhpcy5leHBOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RVhQX1BvcyA9IHRoaXMuc2hvd0VYUC5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RVhQLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5tb3ZlQnkoMC4yLDAsNjApLGNjLmZhZGVPdXQoMC4yKSxjYy5jYWxsRnVuYygoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VYUC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFWFAuc2V0UG9zaXRpb24odGhpcy5zaG93RVhQX1Bvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RVhQLm9wYWNpdHkgPSAyNTU7XHJcbiAgICAgICAgICAgICAgICB9KSkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc2tTcHJpdGVTa2Uubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2Muc2NhbGVUbygwLjIsIDEsIDAuOSksIGNjLnNjYWxlVG8oMC4yLCAxLCAxKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMi41KTtcclxuICAgICAgICBcclxuICAgIH0sXHJcbiAgICAvL+WQiOaIkOW3puWPs+aRh+aRhlxyXG4gICAgYWRkTnVtYmVyQW5pbSgpIHtcclxuICAgICAgICBsZXQgbW92ZVRpbWUgPSAwLjE7XHJcbiAgICAgICAgbGV0IGRlc2tOb2RlID0gY2MuaW5zdGFudGlhdGUodGhpcy5kZXNrU3ByaXRlU2tlLm5vZGUpO1xyXG4gICAgICAgIGRlc2tOb2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5tb3ZlQnkobW92ZVRpbWUsIC03MCwgMCksIGNjLmRlbGF5VGltZSgwLjEpLCBjYy5tb3ZlVG8obW92ZVRpbWUsIDAsIDApLCBjYy5yZW1vdmVTZWxmKCkpKTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoZGVza05vZGUpO1xyXG4gICAgICAgIGxldCBkZXNrTm9kZTIgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmRlc2tTcHJpdGVTa2Uubm9kZSk7XHJcbiAgICAgICAgZGVza05vZGUyLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5tb3ZlQnkobW92ZVRpbWUsIDcwLCAwKSwgY2MuZGVsYXlUaW1lKDAuMSksIGNjLm1vdmVUbyhtb3ZlVGltZSwgMCwgMCksIGNjLmNhbGxGdW5jKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kZXNrU2hvdygpO1xyXG4gICAgICAgIH0pLCBjYy5yZW1vdmVTZWxmKCkpKTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoZGVza05vZGUyKTtcclxuICAgIH0sXHJcbiAgICBpbml0RGVzazogZnVuY3Rpb24gKG51bWJlcnMsIERlc2tTcHJpdGVYLCBEZXNrU3ByaXRlWSkvLyDliJ3lp4vljJZcclxuICAgIHtcclxuICAgICAgICAvLyDliJ3lp4vljJbmlbDlrZdcclxuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcnM7XHJcbiAgICAgICAgdGhpcy5kZXNrU2hvdygpO1xyXG4gICAgICAgIHRoaXMubm9kZS5zZXRQb3NpdGlvbihEZXNrU3ByaXRlWCwgRGVza1Nwcml0ZVkpO1xyXG4gICAgfSxcclxuICAgIGRlc2tTaG93OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubnVtYmVyID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZXNrU3ByaXRlU2tlLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMubGV2ZWxiZy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gdGhpcy5sZXZlbC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubnVtYmVyID49IDEgJiYgdGhpcy5udW1iZXIgPD0gNDIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXNrU3ByaXRlU2tlLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5sZXZlbGJnLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIHRoaXMubGV2ZWwuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgR2FtZVVpVG9vbHMuc2V0U3ByaXRlRnJhbWUoXCJwZXJzaW9uL0xWXCIgKyB0aGlzLm51bWJlciwgdGhpcy5kZXNrU3ByaXRlU2tlKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5leHBOdW1iZXIgPSBHYW1lVG9vbHMuZ2V0QmF0dGVyeWV4cE51bWJlcih0aGlzLm51bWJlcik7XHJcbiAgICAgICAgICAgIHRoaXMubGV2ZWwuZ2V0Q29tcG9uZW50KCdOdW1iZXInKS5zaG93TnVtYmVyKHRoaXMubnVtYmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZGVza0NsaWNrU2hvdyhjbGlja1R5cGUpIHtcclxuICAgICAgICBpZiAoY2xpY2tUeXBlID09IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXNrU3ByaXRlU2tlLm5vZGUub3BhY2l0eSA9IDEyMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlc2tTcHJpdGVTa2Uubm9kZS5vcGFjaXR5ID0gMjU1O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRGVza1Nwcml0ZTsiXX0=