
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Home.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '280c3rsZJJKnZ9RqbALVwtK', 'Home');
// Script/Home.js

"use strict";

var GameTools = require("GameTools");
var GameUiTools = require("GameUiTools");
var GameConfig = require("GameConfig");
cc.Class({
  "extends": cc.Component,
  properties: {
    label: {
      "default": null,
      type: cc.Label,
      displayName: "加载字"
    }
  },
  start: function start() {
    this.num = 0;
    this.schedule(this.updatelabel, 0.2);
  },
  onLoad: function onLoad() {
    GameConfig.buyGoldUpgrade[1] = Math.floor(GameTools.getItemByLocalStorage("buyGoldUpgrade1", 100));
    GameConfig.buyGoldUpgrade[2] = Math.floor(GameTools.getItemByLocalStorage("buyGoldUpgrade2", 1500));
    for (var i = 3; i <= 42; i++) {
      GameConfig.buyGoldUpgrade[i] = Math.floor(GameTools.getItemByLocalStorage("buyGoldUpgrade" + i, Math.floor(Math.pow(3 + Math.ceil(i / 10) * 0.1, i - 2) * 1500)));
    }
    GameConfig.buyCoinUpgrade[1] = Math.floor(GameTools.getItemByLocalStorage("buyCoinUpgrade1", 40));
    for (var _i = 2; _i <= 42; _i++) {
      if (_i < 10) {
        GameConfig.buyCoinUpgrade[_i] = Math.floor(GameTools.getItemByLocalStorage("buyCoinUpgrade" + _i, Math.floor(40 + 20 * (_i - 1))));
      } else {
        GameConfig.buyCoinUpgrade[_i] = Math.floor(GameTools.getItemByLocalStorage("buyCoinUpgrade" + _i, Math.floor(200 * Math.pow(1.5, _i))));
      }
    }
    this.setMessage();
    cc.director.preloadScene("helloworld", function () {
      cc.director.loadScene("helloworld");
    });
  },
  setMessage: function setMessage() {
    GameConfig.GameMoney = GameTools.getItemByLocalStorage("GameMoney", 1000);
    GameConfig.GameCoin = GameTools.getItemByLocalStorage("GameCoin", 0);
    GameConfig.GamePersonMaxLevel = GameTools.getItemByLocalStorage("GamePersonMaxLevel", 1);
    GameConfig.turnTableNum = GameTools.getItemByLocalStorage("turnNum", 0);
    console.log("平台:", cc.sys.platform);
    if (cc.sys.platform === cc.sys.WECHAT_GAME) {
      //接入sdk登录

      // wx.request({
      //     url: '',
      //     success: function (res) {
      //         console.log(res);
      //         GameConfig.IS_GAME_SHARE = res.data.allow_share;
      //         GameConfig.shareData.title = res.data.share_title;
      //         GameConfig.shareData.url = res.data.share_img;
      //         console.log('获取资源成功',GameConfig.IS_GAME_SHARE);
      //     },
      //     fail: function () {
      //         console.log('获取资源失败',GameConfig.IS_GAME_SHARE);
      //     }
      // })
    } else if (cc.sys.platform === cc.sys.BYTEDANCE_GAME) {} else if (cc.sys.platform === cc.sys.QQ_PLAY) {
      BK.QQ.fetchOpenKey(function (errCode, cmd, data) {
        if (errCode == 0) {
          GameConfig.OPENID = data.openId;
          console.log('openId=' + data.openId);
        }
      });
    }
  },
  updatelabel: function updatelabel() {
    this.index++;
    if (this.index % 4 == 0) {
      this.label.string = "游戏正在加载..";
    } else if (this.index % 4 == 1) {
      this.label.string = "游戏正在加载...";
    } else if (this.index % 4 == 2) {
      this.label.string = "游戏正在加载。...";
    } else if (this.index % 4 == 3) {
      this.label.string = "游戏正在加载。....";
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxIb21lLmpzIl0sIm5hbWVzIjpbIkdhbWVUb29scyIsInJlcXVpcmUiLCJHYW1lVWlUb29scyIsIkdhbWVDb25maWciLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImxhYmVsIiwidHlwZSIsIkxhYmVsIiwiZGlzcGxheU5hbWUiLCJzdGFydCIsIm51bSIsInNjaGVkdWxlIiwidXBkYXRlbGFiZWwiLCJvbkxvYWQiLCJidXlHb2xkVXBncmFkZSIsIk1hdGgiLCJmbG9vciIsImdldEl0ZW1CeUxvY2FsU3RvcmFnZSIsImkiLCJwb3ciLCJjZWlsIiwiYnV5Q29pblVwZ3JhZGUiLCJzZXRNZXNzYWdlIiwiZGlyZWN0b3IiLCJwcmVsb2FkU2NlbmUiLCJsb2FkU2NlbmUiLCJHYW1lTW9uZXkiLCJHYW1lQ29pbiIsIkdhbWVQZXJzb25NYXhMZXZlbCIsInR1cm5UYWJsZU51bSIsImNvbnNvbGUiLCJsb2ciLCJzeXMiLCJwbGF0Zm9ybSIsIldFQ0hBVF9HQU1FIiwiQllURURBTkNFX0dBTUUiLCJRUV9QTEFZIiwiQksiLCJRUSIsImZldGNoT3BlbktleSIsImVyckNvZGUiLCJjbWQiLCJkYXRhIiwiT1BFTklEIiwib3BlbklkIiwiaW5kZXgiLCJzdHJpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsU0FBUyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLElBQUlDLFdBQVcsR0FBR0QsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN4QyxJQUFJRSxVQUFVLEdBQUdGLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFFdENHLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ0wsV0FBU0QsRUFBRSxDQUFDRSxTQUFTO0VBRXJCQyxVQUFVLEVBQUU7SUFDUkMsS0FBSyxFQUFFO01BQ0gsV0FBUyxJQUFJO01BQ2JDLElBQUksRUFBRUwsRUFBRSxDQUFDTSxLQUFLO01BQ2RDLFdBQVcsRUFBQztJ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eUMsTUFBTSxHQUFHLFVBQVU7SUFDbEMsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDRCxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRTtNQUM1QixJQUFJLENBQUN4QyxLQUFLLENBQUN5QyxNQUFNLEdBQUcsV0FBVztJQUNuQyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUNELEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO01BQzVCLElBQUksQ0FBQ3hDLEtBQUssQ0FBQ3lDLE1BQU0sR0FBRyxZQUFZO0lBQ3BDLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQ0QsS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7TUFDNUIsSUFBSSxDQUFDeEMsS0FBSyxDQUFDeUMsTUFBTSxHQUFHLGFBQWE7SUFDckM7RUFDSjtBQUVKLENBQUMsQ0FBQyIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEdhbWVUb29scyA9IHJlcXVpcmUoXCJHYW1lVG9vbHNcIik7XG52YXIgR2FtZVVpVG9vbHMgPSByZXF1aXJlKFwiR2FtZVVpVG9vbHNcIik7XG52YXIgR2FtZUNvbmZpZyA9IHJlcXVpcmUoXCJHYW1lQ29uZmlnXCIpO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6XCLliqDovb3lrZdcIixcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgfSxcbiAgICBzdGFydCgpe1xuICAgICAgICB0aGlzLm51bSA9IDA7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy51cGRhdGVsYWJlbCwwLjIpO1xuICAgIH0sXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgR2FtZUNvbmZpZy5idXlHb2xkVXBncmFkZVsxXSA9IE1hdGguZmxvb3IoR2FtZVRvb2xzLmdldEl0ZW1CeUxvY2FsU3RvcmFnZShcImJ1eUdvbGRVcGdyYWRlMVwiLCAxMDApKTtcbiAgICAgICAgR2FtZUNvbmZpZy5idXlHb2xkVXBncmFkZVsyXSA9IE1hdGguZmxvb3IoR2FtZVRvb2xzLmdldEl0ZW1CeUxvY2FsU3RvcmFnZShcImJ1eUdvbGRVcGdyYWRlMlwiLCAxNTAwKSk7XG4gICAgICAgIGZvcihsZXQgaT0zO2k8PTQyO2krKyl7XG4gICAgICAgICAgICBHYW1lQ29uZmlnLmJ1eUdvbGRVcGdyYWRlW2ldPU1hdGguZmxvb3IoR2FtZVRvb2xzLmdldEl0ZW1CeUxvY2FsU3RvcmFnZShcImJ1eUdvbGRVcGdyYWRlXCIraSxNYXRoLmZsb29yKE1hdGgucG93KCgzK01hdGguY2VpbChpLzEwKSowLjEpLGktMikqMTUwMCkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIEdhbWVDb25maWcuYnV5Q29pblVwZ3JhZGVbMV0gPSBNYXRoLmZsb29yKEdhbWVUb29scy5nZXRJdGVtQnlMb2NhbFN0b3JhZ2UoXCJidXlDb2luVXBncmFkZTFcIiwgNDApKTtcbiAgICAgICAgZm9yKGxldCBpPTI7aTw9NDI7aSsrKXtcbiAgICAgICAgICAgIGlmKGk8MTApe1xuICAgICAgICAgICAgICAgIEdhbWVDb25maWcuYnV5Q29pblVwZ3JhZGVbaV09TWF0aC5mbG9vcihHYW1lVG9vbHMuZ2V0SXRlbUJ5TG9jYWxTdG9yYWdlKFwiYnV5Q29pblVwZ3JhZGVcIitpLE1hdGguZmxvb3IoNDArMjAqKGktMSkpKSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBHYW1lQ29uZmlnLmJ1eUNvaW5VcGdyYWRlW2ldPU1hdGguZmxvb3IoR2FtZVRvb2xzLmdldEl0ZW1CeUxvY2FsU3RvcmFnZShcImJ1eUNvaW5VcGdyYWRlXCIraSxNYXRoLmZsb29yKDIwMCpNYXRoLnBvdygxLjUsaSkpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldE1lc3NhZ2UoKTtcbiAgICAgICAgXG4gICAgICAgIGNjLmRpcmVjdG9yLnByZWxvYWRTY2VuZShcImhlbGxvd29ybGRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiaGVsbG93b3JsZFwiKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBzZXRNZXNzYWdlKCl7XG4gICAgICAgIEdhbWVDb25maWcuR2FtZU1vbmV5ID0gR2FtZVRvb2xzLmdldEl0ZW1CeUxvY2FsU3RvcmFnZShcIkdhbWVNb25leVwiLDEwMDApO1xuICAgICAgICBHYW1lQ29uZmlnLkdhbWVDb2luID0gR2FtZVRvb2xzLmdldEl0ZW1CeUxvY2FsU3RvcmFnZShcIkdhbWVDb2luXCIsMCk7XG4gICAgICAgIEdhbWVDb25maWcuR2FtZVBlcnNvbk1heExldmVsID0gR2FtZVRvb2xzLmdldEl0ZW1CeUxvY2FsU3RvcmFnZShcIkdhbWVQZXJzb25NYXhMZXZlbFwiLCAxKTtcbiAgICAgICAgR2FtZUNvbmZpZy50dXJuVGFibGVOdW0gPSBHYW1lVG9vbHMuZ2V0SXRlbUJ5TG9jYWxTdG9yYWdlKFwidHVybk51bVwiLDApO1xuICAgICAgICBjb25zb2xlLmxvZyhcIuW5s+WPsDpcIixjYy5zeXMucGxhdGZvcm0pXG4gICAgICAgIGlmIChjYy5zeXMucGxhdGZvcm0gPT09IGNjLnN5cy5XRUNIQVRfR0FNRSkge1xuICAgICAgICAgICAgLy/mjqXlhaVzZGvnmbvlvZVcblxuICAgICAgICAgICAgLy8gd3gucmVxdWVzdCh7XG4gICAgICAgICAgICAvLyAgICAgdXJsOiAnJyxcbiAgICAgICAgICAgIC8vICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgICAvLyAgICAgICAgIEdhbWVDb25maWcuSVNfR0FNRV9TSEFSRSA9IHJlcy5kYXRhLmFsbG93X3NoYXJlO1xuICAgICAgICAgICAgLy8gICAgICAgICBHYW1lQ29uZmlnLnNoYXJlRGF0YS50aXRsZSA9IHJlcy5kYXRhLnNoYXJlX3RpdGxlO1xuICAgICAgICAgICAgLy8gICAgICAgICBHYW1lQ29uZmlnLnNoYXJlRGF0YS51cmwgPSByZXMuZGF0YS5zaGFyZV9pbWc7XG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCfojrflj5botYTmupDmiJDlip8nLEdhbWVDb25maWcuSVNfR0FNRV9TSEFSRSk7XG4gICAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAgIC8vICAgICBmYWlsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCfojrflj5botYTmupDlpLHotKUnLEdhbWVDb25maWcuSVNfR0FNRV9TSEFSRSk7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgfWVsc2UgaWYgKGNjLnN5cy5wbGF0Zm9ybSA9PT0gY2Muc3lzLkJZVEVEQU5DRV9HQU1FKXtcblxuICAgICAgICB9ZWxzZSBpZihjYy5zeXMucGxhdGZvcm0gPT09IGNjLnN5cy5RUV9QTEFZKXtcbiAgICAgICAgICAgIEJLLlFRLmZldGNoT3BlbktleShmdW5jdGlvbiAoZXJyQ29kZSwgY21kLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVyckNvZGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBHYW1lQ29uZmlnLk9QRU5JRCA9IGRhdGEub3BlbklkO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb3BlbklkPScrZGF0YS5vcGVuSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcblxuXG4gICAgdXBkYXRlbGFiZWwoKXtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICBpZiAodGhpcy5pbmRleCAlIDQgPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5sYWJlbC5zdHJpbmcgPSBcIua4uOaIj+ato+WcqOWKoOi9vS4uXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleCAlIDQgPT0gMSkge1xuICAgICAgICAgICAgdGhpcy5sYWJlbC5zdHJpbmcgPSBcIua4uOaIj+ato+WcqOWKoOi9vS4uLlwiO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5kZXggJSA0ID09IDIpIHtcbiAgICAgICAgICAgIHRoaXMubGFiZWwuc3RyaW5nID0gXCLmuLjmiI/mraPlnKjliqDovb3jgIIuLi5cIjtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmluZGV4ICUgNCA9PSAzKSB7XG4gICAgICAgICAgICB0aGlzLmxhYmVsLnN0cmluZyA9IFwi5ri45oiP5q2j5Zyo5Yqg6L2944CCLi4uLlwiO1xuICAgICAgICB9XG4gICAgfVxuXG59KTtcbiJdfQ==