{"version":3,"sources":["assets\\Script\\panel\\RankItem.js"],"names":["GameConfig","require","GameTools","cc","Class","Component","name","properties","backSprite","Node","rankImage","Sprite","rankLabel","Label","avatarImgSprite","nickLabel","topScoreLabel","levelName","start","init","rank","data","_this","avatarUrl","url","nick","grade","score","level","a1","node","active","loader","loadRes","SpriteFrame","err","spriteFrame","string","toString","createImage","getNumberString","perName","_this2","load","type","texture"],"mappings":";;;;;;AAAA,IAAIA,UAAU,GAAGC,OAAO,CAAC,YAAY,CAAC;AACtC,IAAIC,SAAS,GAAGD,OAAO,CAAC,WAAW,CAAC;AACpCE,EAAE,CAACC,KAAK,CAAC;EACL,WAASD,EAAE,CAACE,SAAS;EACrBC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACRC,UAAU,EAAEL,EAAE,CAACM,IAAI;IACnBC,SAAS,EAAEP,EAAE,CAACQ,MAAM;IACpBC,SAAS,EAAET,EAAE,CAACU,KAAK;IACnBC,eAAe,EAAEX,EAAE,CAACQ,MAAM;IAC1BI,SAAS,EAAEZ,EAAE,CAACU,KAAK;IACnBG,aAAa,EAAEb,EAAE,CAACU,KAAK;IACvBI,SAAS,EAACd,EAAE,CAACU;EACjB,CAAC;EACDK,KAAK,WAAAA,MAAA,EAAG,CACR,CAAC;EAEDC,IAAI,EAAE,SAAAA,KAAUC,IAAI,EAAEC,IAAI,EAAE;IAAA,IAAAC,KAAA;IACxB,IAAIC,SAAS,GAAGF,IAAI,CAACG,GAAG;IACxB;IACA,IAAIC,IAAI,GAAGJ,IAAI,CAACI,IAAI;IACpB,IAAIC,KAAK,GAAGL,IAAI,CAACM,KAAK;IACtB,IAAIC,KAAK,GAAGP,IAAI,CAACQ,EAAE;IAEnB,IAAIT,IAAI,GAAG,CAAC,EAAE;MACV,IAAI,CAACR,SAAS,CAACkB,IAAI,CAACC,MAAM,GAAG,KAAK;MAClC,IAAI,CAACrB,SAAS,CAACoB,IAAI,CAACC,MAAM,GAAG,IAAI;MACjC5B,EAAE,CAAC6B,MAAM,CAACC,OAAO,CAAC,GAAG,IAAIb,IAAI,GAAG,CAAC,CAAC,EAAEjB,EAAE,CAAC+B,WAAW,EAAE,UAACC,GAAG,EAAEC,WAAW,EAAK;QACtEd,KAAI,CAACZ,SAAS,CAAC0B,WAAW,GAAGA,WAAW;MAC5C,CAAC,CAAC;IACN,CAAC,MAAM;MACH,IAAI,CAACxB,SAAS,CAACyB,MAAM,GAAG,CAACjB,IAAI,GAAG,CAAC,EAAEkB,QAAQ,EAAE;IACjD;IAEA,IAAI,CAACC,WAAW,CAAChB,SAAS,CAAC;IAC3B,IAAI,CAACR,SAAS,CAACsB,MAAM,GAAGZ,IAAI;IAC5B;IACA,IAAI,CAACT,aAAa,CAACqB,MAAM,GAAGnC,SAAS,CAACsC,eAAe,CAACd,KAAK,CAAC;IAC5D,IAAGE,KAAK,EAAC;MACL,IAAGA,KAAK,GAAC,EAAE,EAAC;QACR,IAAI,CAACX,SAAS,CAACoB,MAAM,GAAGrC,UAAU,CAACyC,OAAO,CAAC,CAAC,CAAC;MACjD,CAAC,MACG,IAAI,CAACxB,SAAS,CAACoB,MAAM,GAAGrC,UAAU,CAACyC,OAAO,CAACb,KAAK,GAAC,CAAC,CAAC;IAC3D,CAAC,MAAI;MACD,IAAI,CAACX,SAAS,CAACoB,MAAM,GAAGrC,UAAU,CAACyC,OAAO,CAAC,CAAC,CAAC;IACjD;EACJ,CAAC;EACDF,WAAW,WAAAA,YAAChB,SAAS,EAAE;IAAA,IAAAmB,MAAA;IACnBvC,EAAE,CAAC6B,MAAM,CAACW,IAAI,CAAC;MACXnB,GAAG,EAAED,SAAS;MAAEqB,IAAI,EAAE;IAC1B,CAAC,EAAE,UAACT,GAAG,EAAEU,OAAO,EAAK;MACjBH,MAAI,CAAC5B,eAAe,CAACsB,WAAW,GAAG,IAAIjC,EAAE,CAAC+B,WAAW,CAACW,OAAO,CAAC;IAClE,CAAC,CAAC;EACN;AACJ,CAAC,CAAC","sourceRoot":"/","sourcesContent":["var GameConfig = require(\"GameConfig\");\r\nvar GameTools = require(\"GameTools\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n    name: \"RankItem\",\r\n    properties: {\r\n        backSprite: cc.Node,\r\n        rankImage: cc.Sprite,\r\n        rankLabel: cc.Label,\r\n        avatarImgSprite: cc.Sprite,\r\n        nickLabel: cc.Label,\r\n        topScoreLabel: cc.Label,\r\n        levelName:cc.Label,\r\n    },\r\n    start() {\r\n    },\r\n\r\n    init: function (rank, data) {\r\n        let avatarUrl = data.url;\r\n        // let nick = data.nickname.length <= 10 ? data.nickname : data.nickname.substr(0, 10) + \"...\";\r\n        let nick = data.nick;\r\n        let grade = data.score;\r\n        let level = data.a1;\r\n\r\n        if (rank < 3) {\r\n            this.rankLabel.node.active = false;\r\n            this.rankImage.node.active = true;\r\n            cc.loader.loadRes(\"r\" + (rank + 1), cc.SpriteFrame, (err, spriteFrame) => {\r\n                this.rankImage.spriteFrame = spriteFrame;\r\n            });\r\n        } else {\r\n            this.rankLabel.string = (rank + 1).toString();\r\n        }\r\n\r\n        this.createImage(avatarUrl);\r\n        this.nickLabel.string = nick;\r\n        // this.topScoreLabel.string = grade.toString();\r\n        this.topScoreLabel.string = GameTools.getNumberString(grade);\r\n        if(level){\r\n            if(level>42){\r\n                this.levelName.string = GameConfig.perName[0];\r\n            }else\r\n                this.levelName.string = GameConfig.perName[level-1];\r\n        }else{\r\n            this.levelName.string = GameConfig.perName[0];\r\n        }\r\n    },\r\n    createImage(avatarUrl) {\r\n        cc.loader.load({\r\n            url: avatarUrl, type: 'jpg'\r\n        }, (err, texture) => {\r\n            this.avatarImgSprite.spriteFrame = new cc.SpriteFrame(texture);\r\n        });\r\n    },\r\n});\r\n"]}