{"version":3,"sources":["assets\\Script\\DeskSprite.js"],"names":["GameTools","require","GameUiTools","DeskSprite","cc","Class","Component","properties","deskSpriteSke","Sprite","levelbg","Node","level","number","isSelect","expNumber","showEXP","ctor","start","schedule","_this","getEXPNumber","active","getComponent","Label","string","getNumberString","showEXP_Pos","getPosition","runAction","sequence","moveBy","fadeOut","callFunc","setPosition","opacity","node","scaleTo","addNumberAnim","_this2","moveTime","deskNode","instantiate","delayTime","moveTo","removeSelf","addChild","deskNode2","deskShow","initDesk","numbers","DeskSpriteX","DeskSpriteY","setSpriteFrame","showNumber","deskClickShow","clickType","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nvar GameTools = require(\"GameTools\");\r\nvar GameUiTools = require(\"GameUiTools\");\r\nvar DeskSprite = cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        deskSpriteSke: cc.Sprite,\r\n        levelbg:cc.Node,//等级红色底片\r\n        level: cc.Node,//等级字母\r\n        number: 0,// 显示数字\r\n        isSelect: false,\r\n        expNumber: 5,//经验值\r\n        showEXP:cc.Node,//展示的经验\r\n    },\r\n    ctor: function () {\r\n\r\n    },\r\n    start() {\r\n        this.schedule(function() {\r\n            // console.log(\"次数\")\r\n            // 三秒一次\r\n            if (this.number != 0) {\r\n                this.expNumber = GameTools.getEXPNumber(this.number);\r\n                this.showEXP.active = true;\r\n                if(this.isSelect){\r\n                    this.showEXP.getComponent(cc.Label).string = \"+\"+GameTools.getNumberString(this.expNumber)+\"x2\";\r\n                }else{\r\n                    this.showEXP.getComponent(cc.Label).string = \"+\"+GameTools.getNumberString(this.expNumber);\r\n                }\r\n                this.showEXP_Pos = this.showEXP.getPosition();\r\n                this.showEXP.runAction(cc.sequence(cc.moveBy(0.2,0,60),cc.fadeOut(0.2),cc.callFunc(()=>{\r\n                    this.showEXP.active = false;\r\n                    this.showEXP.setPosition(this.showEXP_Pos);\r\n                    this.showEXP.opacity = 255;\r\n                })))\r\n                this.deskSpriteSke.node.runAction(cc.sequence(cc.scaleTo(0.2, 1, 0.9), cc.scaleTo(0.2, 1, 1)));\r\n            }\r\n        }, 2.5);\r\n        \r\n    },\r\n    //合成左右摇摆\r\n    addNumberAnim() {\r\n        let moveTime = 0.1;\r\n        let deskNode = cc.instantiate(this.deskSpriteSke.node);\r\n        deskNode.runAction(cc.sequence(cc.moveBy(moveTime, -70, 0), cc.delayTime(0.1), cc.moveTo(moveTime, 0, 0), cc.removeSelf()));\r\n        this.node.addChild(deskNode);\r\n        let deskNode2 = cc.instantiate(this.deskSpriteSke.node);\r\n        deskNode2.runAction(cc.sequence(cc.moveBy(moveTime, 70, 0), cc.delayTime(0.1), cc.moveTo(moveTime, 0, 0), cc.callFunc(() => {\r\n            this.deskShow();\r\n        }), cc.removeSelf()));\r\n        this.node.addChild(deskNode2);\r\n    },\r\n    initDesk: function (numbers, DeskSpriteX, DeskSpriteY)// 初始化\r\n    {\r\n        // 初始化数字\r\n        this.number = numbers;\r\n        this.deskShow();\r\n        this.node.setPosition(DeskSpriteX, DeskSpriteY);\r\n    },\r\n    deskShow: function () {\r\n        if (this.number == 0) {\r\n            this.deskSpriteSke.node.active = false;\r\n            this.levelbg.active = false;\r\n            // this.level.active = false;\r\n        } else if (this.number >= 1 && this.number <= 42) {\r\n            this.deskSpriteSke.node.active = true;\r\n            this.levelbg.active = true;\r\n            // this.level.active = true;\r\n            GameUiTools.setSpriteFrame(\"persion/LV\" + this.number, this.deskSpriteSke);\r\n            // this.expNumber = GameTools.getBatteryexpNumber(this.number);\r\n            this.level.getComponent('Number').showNumber(this.number);\r\n        }\r\n    },\r\n    deskClickShow(clickType) {\r\n        if (clickType == 1) {\r\n            this.deskSpriteSke.node.opacity = 120;\r\n        } else {\r\n            this.deskSpriteSke.node.opacity = 255;\r\n        }\r\n    },\r\n\r\n});\r\n\r\nmodule.exports = DeskSprite;"]}