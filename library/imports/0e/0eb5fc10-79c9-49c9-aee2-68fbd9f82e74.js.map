{"version":3,"sources":["assets\\Script\\GameTools.js"],"names":["GameConfig","require","cc","sys","platform","WECHAT_GAME","EQ","init","debug","showself","GameTools","numberLabelAtlas","backMusicIsPlay","playSimpleAudioEngine","engineType","IS_GAME_VOICE","loader","loadRes","AudioClip","err","clip","audioEngine","play","playAudio","src","playBackgroundMusic","IS_GAME_MUSIC","stopBackgroundMusic","stop","getItemByLocalStorage","key","value","values","localStorage","getItem","undefined","setItem","Number","setItemByLocalStorage","showToast","msg","wx","title","QQ_PLAY","BK","UI","duration","console","log","toastMessage","toastType","prefab","node","instantiate","getComponent","Component","setMessage","director","getScene","children","addChild","sharePicture","pictureName","successCallFunc","IS_GAME_SHARE","shareAppMessageValue","shareData","query","MAIN_MENU_NUM","imageUrl","url","aldShareAppMessage","window","shareAppMessage","Share","share","qqImgUrl","summary","success","succObj","Console","code","JSON","stringify","data","shareComponent","shareSuccess","fail","failObj","complete","getEXPNumber","number","num","Math","pow","createImageApp","avatarUrl","sprite","image","createImage","onload","texture","Texture2D","initWithElement","handleLoadedTexture","width","height","spriteFrame","SpriteFrame","e","active","navigateToMiniProgram","appId","path","previewImage","urls","envVersion","getNumberString","round","toFixed","showMinProgram","flag","MiniProgram","length","randomIndex","random","miniProgram","icon","Sprite","APPID","PATH","initEQMiniProgram","userInfo","callback","launchOption","getLaunchOptionsSync","setuserinfo","Enable","config","getconfig","recommender","i","ad","type","push","name","box","boxApps","boxTitle","apps","getRankData","shareTicket","removeRankData","postMessage","messageType","_createVedioAd","videoAd","createRewardedVideoAd","adUnitId","load","then","show","showModal","content","showCancel","onClose","res","isEnded","offClose","onError","BYTEDANCE_GAME","tt","Advertisement","createVideoAd","onLoad","Script","onPlayStart","onPlayFinish","raw","getUserInfo","getSetting","authSetting","UserInfo","nickName","authorize","scope","playerName","floor","submitScore","score","level","GamePersonMaxLevel","userData","openId","OPENID","startMs","endMs","Date","getTime","toString","scoreInfo","a1","attr","order","QQ","uploadScoreWithoutRoom","errCode","cmd","initSelfMiniProgram","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var GameConfig = require(\"GameConfig\");\r\n\r\nif (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n    var  EQ  = require(\"eq4096\");\r\n    EQ.init({\r\n        debug: false,\r\n        showself: true\r\n    });\r\n}\r\nvar GameTools = {\r\n    numberLabelAtlas: null,\r\n    backMusicIsPlay: null,\r\n    playSimpleAudioEngine: function (engineType) {\r\n        if (GameConfig.IS_GAME_VOICE) {\r\n            switch (engineType) {\r\n                case 0:\r\n                    cc.loader.loadRes('music/bg01', cc.AudioClip, function (err, clip) {\r\n                        cc.audioEngine.play(clip, true, 0.5);\r\n                    });\r\n                    break;\r\n                case 1:\r\n                    cc.loader.loadRes('music/click', cc.AudioClip, function (err, clip) {\r\n                        cc.audioEngine.play(clip, false, 0.5);\r\n                    });\r\n                    break;\r\n                case 2:\r\n                    cc.loader.loadRes('music/new', cc.AudioClip, function (err, clip) {\r\n                        cc.audioEngine.play(clip, false, 0.5);\r\n                    });\r\n                    break;\r\n                case 3:\r\n                    cc.loader.loadRes('music/select', cc.AudioClip, function (err, clip) {\r\n                        cc.audioEngine.play(clip, false, 0.5);\r\n                    });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    },\r\n    playAudio(src) {\r\n        cc.loader.loadRes(src, cc.AudioClip, function (err, clip) {\r\n            cc.audioEngine.play(clip, false, 0.5);\r\n        });\r\n    },\r\n    playBackgroundMusic: function () {\r\n        if (GameTools.backMusicIsPlay == null && GameConfig.IS_GAME_MUSIC) {\r\n            cc.loader.loadRes('music/bg01', cc.AudioClip, function (err, clip) {\r\n                GameTools.backMusicIsPlay = cc.audioEngine.play(clip, true, 0.5);\r\n            });\r\n        }\r\n    },\r\n    stopBackgroundMusic: function () {\r\n        if (GameTools.backMusicIsPlay != null) {\r\n            cc.audioEngine.stop(GameTools.backMusicIsPlay);\r\n            GameTools.backMusicIsPlay = null;\r\n        }\r\n    },\r\n    getItemByLocalStorage: function (key, value) {\r\n        let values = cc.sys.localStorage.getItem(key);\r\n        if (values === undefined || values === null || values === '') {\r\n            cc.sys.localStorage.setItem(key, value);\r\n            return value;\r\n        }\r\n        if (typeof value === 'boolean') {\r\n            if (typeof values === 'boolean') {\r\n                return values;\r\n            }\r\n            return \"true\" == values;\r\n        } else if (typeof value === 'number') {\r\n            return Number(values);\r\n        }\r\n        return values;\r\n    },\r\n    setItemByLocalStorage: function (key, value) {\r\n        cc.sys.localStorage.setItem(key, value);\r\n    },\r\n\r\n    showToast(msg) {\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.showToast({\r\n                title: msg\r\n            })\r\n        }if(cc.sys.platform === cc.sys.QQ_PLAY){\r\n            BK.UI.showToast({\r\n                title: msg,\r\n                duration:1500\r\n            });\r\n        } else {\r\n            console.log(msg);\r\n        }\r\n\r\n    },\r\n    toastMessage(toastType) {\r\n        cc.loader.loadRes(\"Panel/ShowMessage\", (err, prefab) => {\r\n            if (!err) {\r\n                var node = cc.instantiate(prefab);\r\n                node.getComponent(cc.Component).setMessage(toastType);\r\n                cc.director.getScene().children[0].addChild(node);\r\n            }\r\n        });\r\n    },\r\n    sharePicture(pictureName, successCallFunc) {\r\n        if(!GameConfig.IS_GAME_SHARE){\r\n            return;\r\n        }\r\n        GameTools.setItemByLocalStorage(\"GameCompoundShareNumber\", GameTools.getItemByLocalStorage(\"GameCompoundShareNumber\", 0) + 1);\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            let shareAppMessageValue = {   \r\n                title: GameConfig.shareData.title,\r\n                query: \"x=\" + GameConfig.MAIN_MENU_NUM, //+ \"&\" + qingjs.instance.get_share_token(),\r\n                imageUrl: GameConfig.shareData.url,\r\n            };\r\n            if (wx.aldShareAppMessage) {\r\n                wx.aldShareAppMessage(shareAppMessageValue);\r\n            } else {\r\n                window.wx.shareAppMessage(shareAppMessageValue);\r\n            }\r\n        }else if(cc.sys.platform === cc.sys.QQ_PLAY){\r\n            BK.Share.share({\r\n                qqImgUrl: GameConfig.shareData.url,\r\n                // socialPicPath: 'GameRes://localImage.png',\r\n                title: '大明朝',\r\n                summary: GameConfig.shareData.title,\r\n                // extendInfo: '扩展信息，可选，默认为空',\r\n                success: function (succObj) {\r\n                    // callback && callback(true);\r\n                    BK.Console.log('分享成功', succObj.code, JSON.stringify(succObj.data));\r\n                    GameConfig.shareComponent.shareSuccess();\r\n                },\r\n                fail: function (failObj) {\r\n                    // callback && callback(false);\r\n                    BK.Console.log('分享失败', failObj.code, JSON.stringify(failObj.msg));\r\n                },\r\n                complete: () => {\r\n                    BK.Console.log('分享完成，\b不论成功失败');\r\n                }\r\n            });\r\n        } else {\r\n            if (successCallFunc != undefined) {\r\n                successCallFunc();\r\n            }\r\n            this.toastMessage(0);\r\n            cc.log(\"执行了截图\");\r\n        }\r\n    },\r\n\r\n\r\n    getEXPNumber(number) {\r\n        if(number == 0){\r\n            return false;\r\n        }\r\n        if (number <= 3) {\r\n            let num = Math.pow(2,(number-1))*5;\r\n            return num;\r\n        } else if (number > 3) {\r\n            let num = Math.pow(2.1,(number-3))*20;\r\n            return num;\r\n        }\r\n    },\r\n\r\n    createImageApp(avatarUrl, sprite) {\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            try {\r\n                let image = wx.createImage();\r\n                image.src = avatarUrl;\r\n                image.onload = () => {\r\n                    try {\r\n                        let texture = new cc.Texture2D();\r\n                        texture.initWithElement(image);\r\n                        texture.handleLoadedTexture();\r\n                        texture.width = 110;\r\n                        texture.height = 110;\r\n                        sprite.spriteFrame = new cc.SpriteFrame(texture);\r\n                    } catch (e) {\r\n                        console.log(e);\r\n                        sprite.node.active = false;\r\n                    }\r\n                };\r\n            } catch (e) {\r\n                console.log(e);\r\n                sprite.node.active = false;\r\n            }\r\n        }\r\n    },\r\n    createImage(avatarUrl, sprite) {\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            try {\r\n                let image = wx.createImage();\r\n                image.src = avatarUrl;\r\n                image.onload = () => {\r\n                    try {\r\n                        let texture = new cc.Texture2D();\r\n                        texture.initWithElement(image);\r\n                        texture.handleLoadedTexture();\r\n                        sprite.spriteFrame = new cc.SpriteFrame(texture);\r\n                    } catch (e) {\r\n                        console.log(e);\r\n                        sprite.node.active = false;\r\n                    }\r\n                };\r\n            } catch (e) {\r\n                console.log(e);\r\n                sprite.node.active = false;\r\n            }\r\n        }\r\n    },\r\n    //小游戏跳转\r\n    navigateToMiniProgram(appId, path) {\r\n        if (path == undefined && appId == undefined) {\r\n            console.log(\"直接离开\");\r\n            return;\r\n        }\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            //console.log(appId);\r\n\r\n            if (appId === null) {\r\n                console.log(\"二维码跳转\");\r\n                if (typeof (path) == 'array') {\r\n                    wx.previewImage({\r\n                        urls: path\r\n                    })\r\n                } else {\r\n                    wx.previewImage({\r\n                        urls: [path]\r\n                    })\r\n                }\r\n            } else {\r\n                console.log(\"直接跳转\");\r\n                wx.navigateToMiniProgram({\r\n                    appId: appId,\r\n                    path: path,\r\n                    envVersion: \"release\",\r\n                    success: function () {\r\n                        console.log(\"navigate success\");\r\n                    },\r\n                    fail: function () {\r\n                        console.log(\"navicate fail\");\r\n                    }\r\n                });\r\n\r\n            }\r\n        } else {\r\n            cc.log(\"小程序跳转\");\r\n        }\r\n    },\r\n    getNumberString(number) {\r\n        if (number < 1000) {\r\n            return Math.round(number);\r\n        } else if (number < 1000000) {\r\n            return (number / 1000).toFixed(2) + \"K\";\r\n        } else if (number < 1000000000) {\r\n            return (number / 1000000).toFixed(2) + \"M\";\r\n        } else if (number < 1000000000000) {\r\n            return (number / 1000000000).toFixed(2) + \"B\";\r\n        } else if (number < 1000000000000000) {\r\n            return (number / 1000000000000).toFixed(2) + \"T\";\r\n        } else if (number < 1000000000000000000) {\r\n            return (number / 1000000000000000).toFixed(2) + \"aa\";\r\n        } else if (number < 1000000000000000000000) {\r\n            return (number / 1000000000000000000).toFixed(2) + \"Q\";\r\n        } else {\r\n            return (number / 1000000000000000000).toFixed(2) + \"Q+\";\r\n        }\r\n    },\r\n\r\n\r\n    //小游戏显示\r\n    showMinProgram(node,flag) {\r\n        if (GameConfig.MiniProgram == undefined || GameConfig.MiniProgram.length == 0) {\r\n            return;\r\n        }\r\n        let randomIndex;\r\n        // if(flag == 2){\r\n            let length = GameConfig.MiniProgram.length - 1;\r\n            randomIndex = Math.round(Math.random() * length);\r\n        // }\r\n        let miniProgram = GameConfig.MiniProgram[randomIndex];\r\n        let image = wx.createImage();\r\n        image.src = miniProgram.icon;\r\n        image.onload = () => {\r\n            try {\r\n                if(node == undefined){\r\n                    return ;\r\n                }\r\n                node.active = true;\r\n                let texture = new cc.Texture2D();\r\n                texture.initWithElement(image);\r\n                texture.handleLoadedTexture();\r\n                texture.width = 90;\r\n                texture.height = 90;\r\n                if(node.getComponent(cc.Sprite) != undefined){\r\n                    node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                }\r\n                // cc.loader.load(miniProgram.path, (err, tex) => {\r\n                //     if (!err) {\r\n                //         node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(tex);\r\n                //     }\r\n                // });\r\n                GameConfig.APPID = miniProgram.appId;\r\n                GameConfig.PATH = miniProgram.path;\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        };\r\n    },\r\n\r\n    //获取跳转的信息\r\n    initEQMiniProgram: function (userInfo, callback){\r\n        // if (userInfo == null) {\r\n        //     callback(false);\r\n        //     return;\r\n        // }\r\n        let launchOption = wx.getLaunchOptionsSync();\r\n        EQ.setuserinfo(userInfo,launchOption);\r\n        EQ.Enable();\r\n        // let can = EQ.more();\r\n        // if (can) {\r\n            let config = EQ.getconfig();\r\n            let recommender = config.data.recommender;\r\n            if (recommender != undefined) {\r\n                for (let i = 0; i < recommender.length; i++) {\r\n                    let ad = recommender[i];\r\n                    if (ad.type == 'wxapp') {\r\n                        GameConfig.MiniProgram.push({\r\n                            icon: ad.icon[0],\r\n                            appId: ad.appId,\r\n                            path: ad.path,\r\n                            name: ad.name\r\n                        });\r\n                    }\r\n                    if (ad.type == 'img') {\r\n                        GameConfig.MiniProgram.push({\r\n                            icon: ad.icon[0],\r\n                            appId: null,\r\n                            path: ad.path,\r\n                            name: ad.name\r\n                        });\r\n                    }\r\n                }\r\n                console.log(\"可以\",GameConfig.MiniProgram)\r\n                // callback && callback(true);\r\n            // }else{\r\n            //     this.initEQMiniProgram();\r\n            }\r\n            //解析盒子数据\r\n            let box = config.data.box;\r\n            if(box != undefined && GameConfig.boxApps.length == 0){\r\n                if(box.title != undefined){\r\n                    GameConfig.boxTitle = box.title;\r\n                }\r\n                for (let i = 0; i < box.apps.length; i++) {\r\n                    let ad = box.apps[i];\r\n                    // console.log(ad);\r\n                    if (ad.type == 'wxapp') {\r\n                        GameConfig.boxApps.push({\r\n                            icon: ad.icon[0],\r\n                            appId: ad.appId,\r\n                            path: ad.path,\r\n                            name: ad.name\r\n                        });\r\n                    }else if (ad.type == 'img') {\r\n                        GameConfig.boxApps.push({\r\n                            icon: ad.icon[0],\r\n                            appId: null,\r\n                            path: ad.path,\r\n                            name: ad.name\r\n                        });\r\n                    }\r\n                }\r\n                \r\n            }\r\n            callback && callback(true);\r\n        // } else {\r\n        //     callback && callback(false);\r\n        // } \r\n    },\r\n\r\n\r\n\r\n    getRankData(shareTicket) { //获取排行榜\r\n        console.log(\"获取排行榜\")\r\n        cc.loader.loadRes(\"panel/RankingListView\", (err, prefab) => {\r\n            if (!err) {\r\n                var node = cc.instantiate(prefab);\r\n                if (shareTicket != undefined) {\r\n                    node.getComponent(cc.Component).shareTicket = shareTicket;\r\n                }\r\n                cc.director.getScene().children[0].addChild(node);\r\n            }\r\n        });\r\n    },\r\n    removeRankData() {//移除排行榜数据\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            window.wx.postMessage({\r\n                messageType: 0,\r\n            });\r\n        } else {\r\n            cc.log(\"移除排行榜数据。\");\r\n        }\r\n    },\r\n    //流量主\r\n    _createVedioAd: function (callback) {\r\n        console.log(\"平台:\",cc.sys.platform)\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            // wx.aldSendEvent('观看视频',{'key' : 'value'});\r\n            let videoAd = wx.createRewardedVideoAd({\r\n                adUnitId: 'adunit-edfb4efcf6b9bb8a'\r\n            });\r\n            videoAd.load()\r\n                .then(() => videoAd.show())\r\n                .catch(function (err) {\r\n                    console.log(\"视频加载失败\",err);\r\n                    wx.showModal({\r\n                        title: '提示',\r\n                        content: '视频加载失败',\r\n                        showCancel: false\r\n                    });\r\n                });\r\n            videoAd.onClose(function (res) {\r\n                if(!videoAd){\r\n                    return ;\r\n                }\r\n                if(res.isEnded){\r\n                    // wx.aldSendEvent('完整观看视频',{'key' : 'value'});\r\n                    callback(res);\r\n                    videoAd.offClose();\r\n                }else{\r\n                    videoAd.offClose();\r\n                }\r\n            });\r\n            videoAd.onError(function(msg){\r\n                wx.showToast({\r\n                    title: '错误'\r\n                });\r\n                console.log(msg);\r\n            });\r\n        }else if (cc.sys.platform === cc.sys.BYTEDANCE_GAME){\r\n            let videoAd = tt.createRewardedVideoAd({\r\n                adUnitId: 'ee0p26br1fl1he0gi4'\r\n            });\r\n            videoAd.load()\r\n                .then(() => videoAd.show())\r\n                .catch(function (err) {\r\n                    console.log(\"视频加载失败\",err);\r\n                    tt.showModal({\r\n                        title: '提示',\r\n                        content: '视频加载失败',\r\n                        showCancel: false\r\n                    });\r\n                });\r\n            videoAd.onClose(function (res) {\r\n                if(!videoAd){\r\n                    return ;\r\n                }\r\n                if(res.isEnded){\r\n                    // wx.aldSendEvent('完整观看视频',{'key' : 'value'});\r\n                    callback(res);\r\n                    videoAd.offClose();\r\n                }else{\r\n                    console.log(\"未播放完关闭\")\r\n                    videoAd.offClose();\r\n                }\r\n            });\r\n            videoAd.onError(function(msg){\r\n                tt.showToast({\r\n                    title: '错误'\r\n                });\r\n                console.log(msg);\r\n            });\r\n\r\n        }else if(cc.sys.platform === cc.sys.QQ_PLAY){\r\n            var videoAd = BK.Advertisement.createVideoAd();\r\n            videoAd.onLoad(function () {\r\n                //加载成功\r\n                BK.Script.log(1, 1, \"onLoad\")\r\n            });\r\n\r\n            videoAd.onPlayStart(function () {\r\n                //开始播放\r\n                BK.Script.log(1, 1, \"onPlayStart\")\r\n            });\r\n\r\n            videoAd.onPlayFinish(function () {\r\n                //播放结束\r\n                BK.Script.log(1, 1, \"onPlayFinish\");\r\n                callback({isEnded : true});\r\n            });\r\n\r\n            videoAd.onError(function (err) {\r\n                //加载失败\r\n                BK.Script.log(1, 1, \"onError code:\" + err.code + \" msg:\" + err.msg);\r\n            });\r\n\r\n            videoAd.show();\r\n        } else {\r\n            callback({ raw: true });\r\n        }\r\n    },\r\n\r\n    getUserInfo() {//获取用户信息\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.getSetting({\r\n                success(res) {\r\n                    if (res.authSetting['scope.userInfo']) {//是否授权用户信息\r\n                        wx.getUserInfo({\r\n                            success: function (res) {\r\n                                let userInfo = res.userInfo;\r\n                                GameConfig.UserInfo.nickName = userInfo.nickName;\r\n                                GameConfig.UserInfo.avatarUrl = userInfo.avatarUrl;\r\n                                GameConfig.UserInfo = userInfo;\r\n                            }\r\n                        });\r\n                    } else {\r\n                        wx.authorize({\r\n                            scope: 'scope.userInfo',\r\n                            success() {\r\n                                wx.getUserInfo({\r\n                                    success: function (res) {\r\n                                        let userInfo = res.userInfo;\r\n                                        GameConfig.UserInfo.nickName = userInfo.nickName;\r\n                                        GameConfig.UserInfo.avatarUrl = userInfo.avatarUrl;\r\n                                        GameConfig.UserInfo = userInfo;\r\n                                    }\r\n                                });\r\n                            },\r\n                            fail() {\r\n                                GameTools.toastMessage(1);\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            });\r\n        }else if (cc.sys.platform === cc.sys.BYTEDANCE_GAME){\r\n            console.log(\"字节getUserInfo\")\r\n        }else {\r\n            GameConfig.UserInfo.nickName = GameConfig.playerName[Math.floor(Math.random() * 107)] + Math.floor(Math.random() * 107);\r\n        }\r\n    },\r\n    submitScore(score) { //提交得分\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            window.wx.postMessage({\r\n                messageType: 3,\r\n                MAIN_MENU_NUM: GameConfig.MAIN_MENU_NUM,\r\n                score: score,\r\n                level: GameConfig.GamePersonMaxLevel,\r\n            });\r\n        }else if (cc.sys.platform === cc.sys.BYTEDANCE_GAME){\r\n\r\n        }else if(cc.sys.platform === cc.sys.QQ_PLAY){\r\n            var data = {\r\n                userData: [{\r\n                    openId: GameConfig.OPENID,\r\n                    startMs: GameConfig.startMs + '', //必填，游戏开始时间，单位为毫秒，字符串类型\r\n                    endMs: ((new Date()).getTime()).toString(), //必填，游戏结束时间，单位为毫秒，字符串类型\r\n                    scoreInfo: {\r\n                        score: score, //分数，类型必须是整型数\r\n                        a1: GameConfig.GamePersonMaxLevel\r\n                    }\r\n                }, ],\r\n                attr: {\r\n                    score: {\r\n                        type: 'rank',\r\n                        order: 1,\r\n                    },\r\n                    a1:{\r\n                        type: 'rank',\r\n                        order: 1,\r\n                    }\r\n                },\r\n            };\r\n            // gameMode: 游戏模式，如果没有模式区分，直接填 1\r\n            // 必须配置好周期规则后，才能使用数据上报和排行榜功能\r\n            BK.QQ.uploadScoreWithoutRoom(1, data, function (errCode, cmd, data) {\r\n                // 返回错误码信息\r\n                if (errCode !== 0) {\r\n                    BK.Script.log(1, 1, '上传分数失败!错误码：' + errCode);\r\n                }\r\n            });\r\n        } else {\r\n            cc.log(\"提交得分:\" + GameConfig.MAIN_MENU_NUM + \" : \" + score)\r\n        }\r\n    },\r\n    //自家的appid\r\n    initSelfMiniProgram: function (callback) {\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n        }\r\n    },\r\n};\r\n\r\nmodule.exports = GameTools;"]}